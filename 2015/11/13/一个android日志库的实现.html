<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/><meta content="yes" name="apple-mobile-web-app-capable"/><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/><meta content="telephone=no" name="format-detection"/><meta name="description"/><title>ä¸€ä¸ªandroidæ—¥å¿—åº“çš„å®ç° | ljfxyj2008çš„å°ç«™</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"/><link rel="stylesheet" type="text/css" href="/css/pure-min.css"/><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"/><link rel="stylesheet" type="text/css" href="/css/style.css"/><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"/><link rel="alternate" type="application/atom+xml" href="/atom.xml"/></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">ä¸€ä¸ªandroidæ—¥å¿—åº“çš„å®ç°</h1><a id="logo" href="/">ljfxyj2008çš„å°ç«™</a><p class="description">è®°å½•ç‚¹æ»´</p></div><div id="nav-menu"><a href="/" class="current"><i class="icon-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="icon-archive"> å½’æ¡£</i></a><a href="/about/"><i class="icon-about"> å…³äº</i></a><a href="/atom.xml"><i class="icon-rss"> è®¢é˜…</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post post-page"><h1 class="post-title">ä¸€ä¸ªandroidæ—¥å¿—åº“çš„å®ç°</h1><div class="post-meta">2015-11-13 | <span class="categories">åˆ†ç±»äº<a href="/categories/Android/">Android</a></span></div><span data-thread-key="2015/11/13/ä¸€ä¸ªandroidæ—¥å¿—åº“çš„å®ç°.html" class="ds-thread-count"></span><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">æ–‡ç« ç›®å½•</div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#è°ƒç ”"><span class="toc-number">1.</span> <span class="toc-text">è°ƒç ”</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#gradleç›´æ¥é…ç½®æ—¥å¿—åº“"><span class="toc-number">2.</span> <span class="toc-text">gradleç›´æ¥é…ç½®æ—¥å¿—åº“</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#æ—¥å¿—å†™å…¥åˆ°æ–‡ä»¶"><span class="toc-number">3.</span> <span class="toc-text">æ—¥å¿—å†™å…¥åˆ°æ–‡ä»¶</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#é…ç½®æ—¥å¿—åº“æœåŠ¡"><span class="toc-number">4.</span> <span class="toc-text">é…ç½®æ—¥å¿—åº“æœåŠ¡</span></a></li></ol></div></div><div class="post-content"><h1 id="è°ƒç ”">è°ƒç ”</h1><p>åœ¨androidå¼€å‘ä¸­ï¼Œå¦‚æœéœ€è¦æ‰“å°è°ƒè¯•ä¿¡æ¯ï¼Œå¾€å¾€ä¼šä½¿ç”¨Log.d()ã€Log.e()ä¹‹ç±»çš„ç”±android.util.Logæä¾›çš„æ–¹æ³•ã€‚å®ƒçš„å¥½å¤„æ˜¯ç®€å•ã€æ–¹ä¾¿ï¼Œä¸è¶³ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå¯å®šåˆ¶æ€§å·®ï¼Œä¸èƒ½æ‰“å°åˆ°æ–‡ä»¶ã€‚å¦‚æœæƒ³åœ¨å‘è¡Œç‰ˆappä¸­çš„æŸäº›å…³é”®è¯­å¥æ‰“å°logåˆ°æ–‡ä»¶ï¼Œæˆ–è€…åœ¨appå´©æºƒæ—¶æŠŠå´©æºƒä¿¡æ¯æ‰“å°åˆ°æ–‡ä»¶ä¾›ä¸Šä¼ åˆ†æï¼Œé‚£ä¹ˆandroid.util.Logå°±æ— èƒ½ä¸ºåŠ›äº†ã€‚<br>åœ¨ç½‘ä¸Šåšäº†ä¸€ä¸‹androidå¹³å°æ—¥å¿—åº“çš„è°ƒç ”ï¼ŒæŒ‘å‡ºä¸€äº›æ¯”è¾ƒæœ‰ä»£è¡¨æ€§æœ‰å½±å“åŠ›çš„ï¼Œå¤§è‡´ç»“æœå¦‚ä¸‹ï¼š</p>
<blockquote>
<p>â‘ orhanobut/loggerï¼š<br>æ¥è‡ªgithub.comï¼Œæˆªæ­¢2015å¹´11æœˆ10æ—¥15:53:20è¯¥é¡¹ç›®å·²ç»æœ‰1996é¢—æ˜Ÿï¼ï¼ï¼<br>åœ°å€ï¼š<a href="https://github.com/orhanobut/logger" target="_blank" rel="external">https://github.com/orhanobut/logger</a></p>
<p>â‘¡JakeWharton/timberï¼š<br>æ¥è‡ªgithub.comï¼Œæˆªæ­¢2015å¹´11æœˆ10æ—¥15:54:22è¯¥é¡¹ç›®å·²ç»æœ‰1571é¢—æ˜Ÿï¼ï¼ï¼<br>åœ°å€ï¼š<a href="https://github.com/JakeWharton/timber" target="_blank" rel="external">https://github.com/JakeWharton/timber</a></p>
<p>â‘¢noveogroup/android-loggerï¼š<br>æ¥è‡ªgithub.comï¼Œæˆªæ­¢2015å¹´11æœˆ10æ—¥15:55:56è¯¥é¡¹ç›®å·²ç»æœ‰125é¢—æ˜Ÿï¼ˆè·Ÿä¸Šé¢ä¸¤ä½æ¯”å·®çš„æŒºå¤šï¼‰ã€‚<br>åœ°å€ï¼š<a href="https://github.com/noveogroup/android-logger" target="_blank" rel="external">https://github.com/noveogroup/android-logger</a></p>
<p>â‘£SLF4Jï¼š<br>å®ƒåªæ˜¯ä¸€ä¸ªå¯¹logç³»ç»Ÿè¿›è¡ŒæŠ½è±¡çš„è¡¨ç°å½¢å¼ï¼Œä¸æ˜¯å…·ä½“çš„å®ç°ã€‚å®ƒæ”¯æŒç¬¬ä¸‰æ–¹logæ¡†æ¶ï¼Œæ¯”å¦‚log4jç­‰ã€‚å¦‚æœéœ€è¦æŒ‡å®šç¬¬ä¸‰æ–¹logæ¡†æ¶ï¼Œåªéœ€è¦åœ¨è¿è¡Œæ—¶æŠŠå¯¹åº”çš„slf4jçš„jaræ–‡ä»¶æ”¾åœ¨ä½ çš„class pathä¸­ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨bindè¯¥logæ¡†æ¶ã€‚æ¯”å¦‚ï¼Œè¦ä»java.util.loggingä¸­åˆ‡æ¢åˆ°log4jï¼Œåªéœ€è¦æŠŠslf4j-jdk-1.7.12.jaræ›¿æ¢ä¸ºslf4j-log4j12-1.7.12.jarå³å¯ã€‚<br>åœ°å€ï¼š<a href="http://www.slf4j.org/download.html" target="_blank" rel="external">http://www.slf4j.org/download.html</a></p>
<p>â‘¤SLF4J-Androidï¼š<br>SLF4J-Androidæ˜¯å¯¹SLF4Jçš„APIçš„é‡æ–°åŒ…è£…ï¼Œä»¥åŠä¸€ä¸ªè½»é‡çº§çš„bindå®ç°ã€‚è¯¥å®ç°ç®€å•çš„æŠŠæ‰€æœ‰çš„SLF4Jçš„logè¯·æ±‚éƒ½ç”¨Androidçš„Logå·¥å…·è¿›è¡Œäº†æ›¿æ¢ã€‚åŠŸèƒ½ä¸SLF4Jç±»ä¼¼ã€‚ä¸è¿‡åªæ”¯æŒ23ä¸ªå­—ç¬¦é•¿åº¦çš„Tagï¼Œä¾‹å¦‚com.example.myapp.MyClassä¼šè¢«æˆªæ–­ä¸ºc*.e*.m*.MyClassï¼Œä¼šå¯¼è‡´ä¸åŒçš„ç±»åœ¨tagä¸­æ˜¾ç¤ºåŒæ ·çš„åç§°ï¼Œå¼•èµ·æ··æ·†ã€‚<br>åœ°å€ï¼š<a href="http://www.slf4j.org/android/" target="_blank" rel="external">http://www.slf4j.org/android/</a></p>
<p>â‘¥ LOGBackï¼š<br>LOGBackä¸Log4Jçš„ä½œè€…æ˜¯åŒä¸€ä¸ªäººã€‚ä½œè€…æ›´æ¨èä½¿ç”¨LOGBackã€‚å…·ä½œè€…è¯´LOGBackåœ¨æŸäº›è‹›åˆ»çš„æ‰§è¡Œè·¯å¾„ä¸‹ï¼Œæ¯”log4jå·®ä¸å¤šè¦å¿«10å€ï¼Œç»è¿‡äº†é•¿æœŸè€Œå¹¿æ³›çš„æµ‹è¯•ï¼Œæ¯”log4jæ›´ä¸ºå¯é ã€‚ä¸è¿‡è¿™è´§æ˜¯ä¸ªé‡é‡çº§é€‰æ‰‹ï¼ŒåŠŸèƒ½å¤ªå…¨ï¼Œä½“ç§¯åºå¤§ã€‚<br>åœ°å€ï¼š<a href="http://logback.qos.ch/" target="_blank" rel="external">http://logback.qos.ch/</a></p>
<p>â‘¦android-logging-log4jï¼š<br>å†…éƒ¨ä½¿ç”¨log4jï¼Œæ”¯æŒslf4j;é€‚ç”¨äºlog4jçš„LogCatAppenderï¼Œå®ƒèƒ½å¤ŸæŠŠlogæ‰“å°åˆ°LogCat;æä¾›äº†ä¸€ä¸ªlog4jçš„é…ç½®è£…é¥°ç±»ï¼Œç”¨å®ƒèƒ½å¤Ÿæ–¹ä¾¿åœ°é…ç½®Log4J;åŒæ—¶ä¸éœ€è¦ä¿®æ”¹log4j.jaræ–‡ä»¶ã€‚<br>åœ°å€ï¼š<a href="https://code.google.com/p/android-logging-log4j/" target="_blank" rel="external">https://code.google.com/p/android-logging-log4j/</a></p>
</blockquote>
<p>å‰ä¸‰ä¸ªåº“æ˜¯ä¸“ä¸ºandroidè®¾è®¡çš„ï¼Œå¯ä»¥çœ‹åˆ°æ”¯æŒè€…ä¼—å¤šï¼Œä¸è¿‡å®ƒä»¬å†…éƒ¨å®ç°ä¸Šä¹Ÿæ˜¯è°ƒç”¨android.util.Logçš„æ–¹æ³•æ‰“å°åˆ°æ§åˆ¶å°ï¼Œä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚åé¢çš„å‡ ä¸ªåº“ä¸­æœ‰ä¸€äº›é€‰æ‰‹éå¸¸å…¨èƒ½ï¼Œä¸è¿‡ä½“ç§¯è¾ƒå¤§ï¼Œå¾ˆå¤šåŠŸèƒ½æ˜¯æˆ‘ä»¬ä¸éœ€è¦çš„ï¼Œè€Œä¸”å®ƒä¹Ÿæ— æ³•å¾ˆæ–¹ä¾¿çš„æ‰©å±•è‡ªå®šä¹‰çš„æ—¥å¿—å®ç°ï¼Œæ¯”å¦‚appå´©æºƒä¿¡æ¯è·å–ã€æ—¥å¿—æ–‡ä»¶åå°ä¸Šä¼ ç­‰ã€‚äºæ˜¯ä¹å¼€å§‹è‡ªå·±åŠ¨æ‰‹å®ç°ä¸€ä¸ªæ—¢æ–¹ä¾¿å®ç”¨ï¼Œèƒ½è¦†ç›–åŸºæœ¬çš„æ§åˆ¶å°ã€æ–‡ä»¶è¾“å‡ºï¼Œåˆä¾¿äºè‡ªå®šä¹‰æ‰©å±•çš„androidæ—¥å¿—åº“ã€‚</p>
<h1 id="gradleç›´æ¥é…ç½®æ—¥å¿—åº“">gradleç›´æ¥é…ç½®æ—¥å¿—åº“</h1><p>log4jæœ€å¼ºå¤§æ–¹ä¾¿çš„åœ°æ–¹åº”è¯¥å°±æ˜¯å®ƒå¯ä»¥ç›´æ¥é€šè¿‡propertyæ–‡ä»¶è¿›è¡Œé…ç½®ã€‚è¿™é‡Œç”±äºæˆ‘ä»¬å®ç”¨Android Studioè¿›è¡Œå¼€å‘ï¼Œæ‰€ä»¥å¸Œæœ›èƒ½å¤Ÿç›´æ¥é€šè¿‡build.gradleæ–‡ä»¶å¯¹æˆ‘ä»¬çš„æ—¥å¿—åº“è¿›è¡Œé…ç½®ã€‚åœ¨ç½‘ä¸Šæœç´¢äº†è‰¯ä¹…ï¼Œå‘ç°å¯ä»¥åœ¨buildTypesä¸­åˆ†åˆ«ä¸ºdebugç‰ˆæœ¬å’Œreleaseç‰ˆæœ¬ï¼ˆç”šè‡³æ›´å¤šå…¶ä»–è‡ªå®šä¹‰ç‰ˆæœ¬ï¼‰å®šä¹‰ä¸åŒçš„buildConfigFieldå‚æ•°ï¼Œç„¶ååœ¨javaä»£ç ä¸­é€šè¿‡è‡ªåŠ¨ç”Ÿæˆçš„BuildConfigæ–‡ä»¶è¿›è¡Œè¯»å–ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘åœ¨moduleçš„build.gradeæ–‡ä»¶ä¸­åšäº†å¦‚ä¸‹é…ç½®ï¼š</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            minifyEnabled <span class="keyword">false</span></span><br><span class="line">            proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//Logger settings for release mode</span></span><br><span class="line">            <span class="comment">//ä»¥ä¸‹æ˜¯é…ç½®MyLogæ‰“å°åŠŸèƒ½çš„å„é¡¹å‚æ•°</span></span><br><span class="line">            buildConfigField(<span class="string">"String"</span>, <span class="string">"logLevel"</span>, <span class="string">"\"VERBOSE\""</span>)<span class="comment">//è®¾ç½®å½“å‰logçš„æ‰“å°çº§åˆ«ã€‚æ”¯æŒçš„æ‰“å°çº§åˆ«åˆ†åˆ«ä¸ºï¼šVERBOSE,DEBUG,INFO,WARN,ERROR,ASSERTã€‚ä¸logcatçš„çº§åˆ«ä¸€ä¸€å¯¹åº”ã€‚åªæœ‰ç­‰äºæˆ–é«˜äºæ­¤çº§åˆ«çš„logæ‰ä¼šè¢«æ‰“å°å‡ºæ¥ã€‚</span></span><br><span class="line">            buildConfigField(<span class="string">"String"</span>, <span class="string">"logToSDDirName"</span>, <span class="string">"\"MyLogs-release\""</span>)<span class="comment">//å¦‚æœè®¾ç½®äº†æ‰“å°åˆ°æ–‡ä»¶ï¼Œåˆ™æ­¤å­—æ®µæŒ‡å®šæŠŠæ—¥å¿—æ‰“å°åˆ°SDå¡çš„å“ªä¸ªç›®å½•</span></span><br><span class="line">            buildConfigField(<span class="string">"int"</span>, <span class="string">"singleLogFileSizeLimit"</span>, <span class="string">"10"</span>)<span class="comment">//å¦‚æœè®¾ç½®äº†æ‰“å°åˆ°æ–‡ä»¶ï¼Œåˆ™æ­¤å­—æ®µè®¾ç½®å•ä¸ªlogæ–‡ä»¶çš„å¤§å°ä¸Šé™ï¼Œå•ä½æ˜¯MB</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        debug &#123;</span><br><span class="line">            <span class="comment">//Logger settings for debug mode</span></span><br><span class="line">            buildConfigField(<span class="string">"String"</span>, <span class="string">"logLevel"</span>, <span class="string">"\"DEBUG\""</span>)<span class="comment">//è®¾ç½®å½“å‰logçš„æ‰“å°çº§åˆ«ã€‚æ”¯æŒçš„æ‰“å°çº§åˆ«åˆ†åˆ«ä¸ºï¼šVERBOSE,DEBUG,INFO,WARN,ERROR,ASSERTã€‚ä¸logcatçš„çº§åˆ«ä¸€ä¸€å¯¹åº”ã€‚åªæœ‰ç­‰äºæˆ–é«˜äºæ­¤çº§åˆ«çš„logæ‰ä¼šè¢«æ‰“å°å‡ºæ¥ã€‚</span></span><br><span class="line">            buildConfigField(<span class="string">"String"</span>, <span class="string">"logToSDDirName"</span>, <span class="string">"\"MyLogs-debug\""</span>)<span class="comment">//å¦‚æœè®¾ç½®äº†æ‰“å°åˆ°æ–‡ä»¶ï¼Œåˆ™æ­¤å­—æ®µæŒ‡å®šæŠŠæ—¥å¿—æ‰“å°åˆ°SDå¡çš„å“ªä¸ªç›®å½•</span></span><br><span class="line">            buildConfigField(<span class="string">"int"</span>, <span class="string">"singleLogFileSizeLimit"</span>, <span class="string">"10"</span>)<span class="comment">//å¦‚æœè®¾ç½®äº†æ‰“å°åˆ°æ–‡ä»¶ï¼Œåˆ™æ­¤å­—æ®µè®¾ç½®å•ä¸ªlogæ–‡ä»¶çš„å¤§å°ä¸Šé™ï¼Œå•ä½æ˜¯MB</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆå°±å¯ä»¥åœ¨å¯¹åº”moduleçš„javaä»£ç ä¸­è¿›è¡Œè¯»å–ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = BuildConfig.logMethodDepth;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ¡ˆå¹¶æ²¡æœ‰é—®é¢˜ï¼Œä¸è¿‡æ¥ä¸‹æ¥å´è¸©è¿›äº†ä¸€ä¸ªå‘ï¼Œå› ä¸ºæˆ‘ä¸‹æ„è¯†çš„æŠŠè¿™äº›é…ç½®éƒ½å†™åœ¨äº†æˆ‘çš„Logåº“moduleä¸­ï¼ŒåŒæ ·ï¼Œå¯¹é…ç½®å‚æ•°ï¼ˆå¦‚logMethodDepthç­‰ï¼‰çš„è¯»å–ä¹Ÿæ˜¯åœ¨Logåº“moduleçš„javaä»£ç ä¸­ã€‚è¿™æ ·å°±å¸¦æ¥ä¸¤ä¸ªé—®é¢˜ï¼Œä¹Ÿæ˜¯åæ¥æ‰æ„è¯†åˆ°çš„ï¼š</p>
<ul>
<li>å‘â‘ ï¼š<br>Gradleç›®å‰æœ‰ä¸€ä¸ªbugï¼šä½ åœ¨åº“é¡¹ç›®çš„build.gradleä¸­å®šä¹‰äº†releaseå’Œdebugä¸¤ç§é…ç½®ï¼Œç„¶åä¸è®ºä½ çš„Build Variantsæ˜¯é€‰æ‹©debugè¿˜æ˜¯releaseï¼Œé»˜è®¤éƒ½åªä¼šç¼–è¯‘releaseç‰ˆæœ¬ã€‚åœ¨stackoverflowä¸Šæœç´¢åå‘ç°å¥½å‡ å¹´å‰å°±å·²ç»æœ‰äººåœ¨æè¿™ä¸ªé—®é¢˜äº†ï¼Œä¸è¿‡ç›´åˆ°æ—¥å‰åœ¨androidå¼€å‘è€…ç½‘ç«™ä¸Šä»ç„¶æŠŠè¿™ä¸ªé—®é¢˜åˆ—ä¸ºå¸Œæœ›åœ¨å°†æ¥è§£å†³çš„é—®é¢˜ã€‚ä¸è¿‡è¿™ä¸ªé—®é¢˜åæ¥é€šè¿‡ä¸€ä¸ªæ¯”è¾ƒç»•çš„æ–¹æ³•è§£å†³äº†ï¼Œå°±æ˜¯åœ¨Logåº“moduleçš„build.gradleä¸­åŠ å…¥defaultPublishConfigé…ç½®ï¼Œå˜æˆè¿™æ ·ï¼š</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">defaultConfig &#123;</span><br><span class="line">        minSdkVersion <span class="number">15</span></span><br><span class="line">        targetSdkVersion <span class="number">23</span></span><br><span class="line">        versionCode <span class="number">1</span></span><br><span class="line">        versionName <span class="string">"1.0"</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¦‚æœè¦ä½¿ç”¨buildTypesä¸­debugç‰ˆçš„logé…ç½®ï¼Œåˆ™è®¾ç½®ä¸ºdebugï¼›å¦åˆ™ï¼Œè®¾ç½®ä¸ºrelease</span></span><br><span class="line">        defaultPublishConfig <span class="string">"debug"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±å¯ä»¥æŒ‡å®šæ˜¯ä½¿ç”¨debugç‰ˆè¿˜æ˜¯releaseç‰ˆçš„é…ç½®äº†ã€‚ä¸è¿‡è¿™æ ·çš„åº“æä¾›ç»™ç”¨æˆ·ä¹Ÿå¤Ÿéº»çƒ¦çš„ï¼Œå› ä¸ºç”¨æˆ·ä¸ä»…è¦è®¾ç½®è‡ªå·±appçš„buildTypeï¼Œè¿˜å¾—æ¯æ¬¡æ‰‹åŠ¨æ¥è®¾ç½®Logåº“moduleçš„ç¼–è¯‘typeï¼Œæä¸å¥½ä¸€ä¸å°å¿ƒä¸¤è€…è®¾çš„ä¸ç»Ÿä¸€å°±éº»çƒ¦äº†ã€‚</p>
<ul>
<li>å‘â‘¡ï¼š<br>å¦‚æœä»¥è¿™æ ·çš„æ–¹å¼æ¥é…ç½®Logåº“ï¼Œé‚£ä¹ˆç”¨æˆ·å°±åªèƒ½ä»¥moduleæºç çš„æ–¹å¼å°†Logåº“å¼•å…¥è‡ªå·±çš„å·¥ç¨‹ã€‚å¦‚æœè¦æŠŠLogåº“æ‰“æˆaaråŒ…æä¾›ç»™ç”¨æˆ·æ€ä¹ˆåŠï¼Ÿå‚æ•°å°±æ²¡æ³•è‡ªå®šä¹‰äº†å§ã€‚</li>
</ul>
<p>æ‰€ä»¥ï¼Œé†’æ‚Ÿåå°±æŠŠå¯¹Logåº“çš„è‡ªå®šä¹‰é…ç½®å‚æ•°ä»Logåº“çš„build.gradleç§»åŠ¨åˆ°äº†ç”¨æˆ·appçš„build.gradleä¸­ï¼Œä¹Ÿå°±æ˜¯åœ¨readme.mdæ–‡ä»¶ä¸­è¯´æ˜ä½¿ç”¨æ–¹æ³•ï¼Œå…¶ä¸­ä¸€æ­¥å°±æ˜¯è¦ç”¨æˆ·ä¸æŠŠç¤ºä¾‹ä»£ç æ‹·è´åˆ°è‡ªå·±appçš„build.gradleä¸­ï¼Œåœ¨å¯¹Logè¿›è¡Œåˆå§‹åŒ–æ—¶è¿›è¡Œé…ç½®å‚æ•°çš„è°ƒç”¨ã€‚å½“ç„¶ï¼Œè¿™é‡ŒLogåˆå§‹åŒ–çš„ä»£ç ä¹Ÿæ˜¯åœ¨è¯´æ˜æ–‡ä»¶ä¸­å†™å¥½çš„ï¼Œç”¨æˆ·æ‹·è´å³å¯ã€‚</p>
<h1 id="æ—¥å¿—å†™å…¥åˆ°æ–‡ä»¶">æ—¥å¿—å†™å…¥åˆ°æ–‡ä»¶</h1><p>è¦å®ç°æŠŠæ—¥å¿—å†™å…¥åˆ°sdçš„æŒ‡å®šç›®å½•ä¸‹ï¼Œæ—¥å¿—æ–‡ä»¶æŒ‰ç…§æ—¥æœŸè¿›è¡Œè‡ªåŠ¨å‘½åï¼Œæ¯ä¸ªæ—¥å¿—æ–‡ä»¶è¦é™åˆ¶å¤§å°ï¼Œè¾¾åˆ°æ–‡ä»¶å¤§å°ä¸Šé™åè‡ªåŠ¨åˆ›å»ºæ–°çš„æ–‡ä»¶ï¼Œç­‰ç­‰ã€‚äºæ˜¯åˆgoogleäº†è‰¯ä¹…ï¼Œå‘ç°å¯ä»¥ç”¨java.util.logging.FileHandleré…åˆjava.util.logging.loggeræ¥å®ç°ã€‚<br>è¦ä½¿ç”¨FileHandlerï¼Œå…ˆè¦å®ç°ä¸€ä¸ªè‡ªå·±çš„Formatterç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyFormatter</span> <span class="keyword">extends</span> <span class="title">Formatter</span> </span>&#123;</span><br><span class="line">        String appPackageName;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">MyFormatter</span><span class="params">(String appPackageName)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.appPackageName = appPackageName;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="annotation">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">format</span><span class="params">(LogRecord rec)</span> </span>&#123;</span><br><span class="line">            StringBuffer buf = <span class="keyword">new</span> StringBuffer();</span><br><span class="line"></span><br><span class="line">            SimpleDateFormat timeFormat = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line"></span><br><span class="line">            buf.append(timeFormat.format(<span class="keyword">new</span> Date()));</span><br><span class="line">            buf.append(<span class="string">'/'</span>);</span><br><span class="line">            buf.append(appPackageName);</span><br><span class="line">            buf.append(<span class="string">' '</span>);</span><br><span class="line">            buf.append(MYLogLevel.getSimpleLevelStringByJavaLevel(rec.getLevel()));</span><br><span class="line">            buf.append(<span class="string">'/'</span>);</span><br><span class="line">            buf.append(rec.getParameters()[<span class="number">0</span>]);</span><br><span class="line">            buf.append(<span class="string">':'</span>);</span><br><span class="line">            buf.append(<span class="string">' '</span>);</span><br><span class="line">            buf.append(formatMessage(rec));</span><br><span class="line">            buf.append(<span class="string">'\n'</span>);</span><br><span class="line">            <span class="keyword">return</span> buf.toString();</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>   
<p>ç„¶åï¼Œåˆ›å»ºä¸€ä¸ªFileHandlerå®ä¾‹ï¼Œå¹¶æŠŠMyFormatterçš„ä¸€ä¸ªå®ä¾‹ä½œä¸ºå‚æ•°ä¼ ç»™æˆ‘ä»¬çš„FileHandlerå®ä¾‹ï¼Œå¹¶ç”¨FileHandleræ¥ä½œä¸ºæˆ‘ä»¬çš„Loggerçš„å¤„ç†å™¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;                                                                                                                                        </span><br><span class="line">		Logger logger = Logger.getLogger(packageName);                                                                                       </span><br><span class="line">		logger.setUseParentHandlers(<span class="keyword">false</span>);                                                                                                  </span><br><span class="line">                                                                                                                                             </span><br><span class="line">		SimpleDateFormat dateformat1 = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd"</span>);                                                                   </span><br><span class="line">		String datestring = dateformat1.format(<span class="keyword">new</span> Date());                                                                                  </span><br><span class="line">		fh = <span class="keyword">new</span> FileHandler(file.getAbsolutePath() + <span class="string">"_"</span> + datestring + <span class="string">"_%g"</span> + <span class="string">".log"</span>,                                                     </span><br><span class="line">				singleLogFileSizeLimit * <span class="number">1024</span> * <span class="number">1024</span>, <span class="number">9999</span>, <span class="keyword">true</span>);                                                                           </span><br><span class="line">		fh.setFormatter(<span class="keyword">new</span> MyFormatter(packageName));                                                                                       </span><br><span class="line">		logger.addHandler(fh);                                                                                                               </span><br><span class="line">                                                                                                                                             </span><br><span class="line">		<span class="keyword">return</span> logger;                                                                                                                       </span><br><span class="line">	&#125; <span class="keyword">catch</span> (IOException e) &#123;                                                                                                                </span><br><span class="line">		e.printStackTrace();                                                                                                                 </span><br><span class="line">		<span class="keyword">if</span> (fh != <span class="keyword">null</span>) &#123;                                                                                                                    </span><br><span class="line">			fh.close();                                                                                                                      </span><br><span class="line">		&#125;                                                                                                                                    </span><br><span class="line">                                                                                                                                             </span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;                                                                                                                         </span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>å…³äºFileHandlerå®ä¾‹åŒ–çš„å‚æ•°ï¼Œå®˜ç½‘è¯´æ˜å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>public class FileHandler<br>extends StreamHandler<br>Simple file logging Handler.<br>The FileHandler can either write to a specified file, or it can write to a rotating set of files.<br>For a rotating set of files, as each file reaches a given size limit, it is closed, rotated out, and a new file opened. Successively older files are named by adding â€œ0â€, â€œ1â€, â€œ2â€, etc. into the base filename.<br>By default buffering is enabled in the IO libraries but each log record is flushed out when it is complete.<br>By default the XMLFormatter class is used for formatting.<br>Configuration: By default each FileHandler is initialized using the following LogManager configuration properties. If properties are not defined (or have invalid values) then the specified default values are used.<br>java.util.logging.FileHandler.level specifies the default level for the Handler (defaults to Level.ALL).<br>java.util.logging.FileHandler.filter specifies the name of a Filter class to use (defaults to no Filter).<br>java.util.logging.FileHandler.formatter specifies the name of a Formatter class to use (defaults to java.util.logging.XMLFormatter)<br>java.util.logging.FileHandler.encoding the name of the character set encoding to use (defaults to the default platform encoding).<br>java.util.logging.FileHandler.limit specifies an approximate maximum amount to write (in bytes) to any one file. If this is zero, then there is no limit. (Defaults to no limit).<br>java.util.logging.FileHandler.count specifies how many output files to cycle through (defaults to 1).<br>java.util.logging.FileHandler.pattern specifies a pattern for generating the output file name. See below for details. (Defaults to â€œ%h/java%u.logâ€).<br>java.util.logging.FileHandler.append specifies whether the FileHandler should append onto any existing files (defaults to false).<br>A pattern consists of a string that includes the following special components that will be replaced at runtime:<br>â€œ/â€œ the local pathname separator<br>â€œ%tâ€ the system temporary directory<br>â€œ%hâ€ the value of the â€œuser.homeâ€ system property<br>â€œ%gâ€ the generation number to distinguish rotated logs<br>â€œ%uâ€ a unique number to resolve conflicts<br>â€œ%%â€ translates to a single percent sign â€œ%â€<br>If no â€œ%gâ€ field has been specified and the file count is greater than one, then the generation number will be added to the end of the generated filename, after a dot.<br>Thus for example a pattern of â€œ%t/java%g.logâ€ with a count of 2 would typically cause log files to be written on Solaris to /var/tmp/java0.log and /var/tmp/java1.log whereas on Windows 95 they would be typically written to C:\TEMP\java0.log and C:\TEMP\java1.log<br>Generation numbers follow the sequence 0, 1, 2, etc.<br>Normally the â€œ%uâ€ unique field is set to 0. However, if the FileHandler tries to open the filename and finds the file is currently in use by another process it will increment the unique number field and try again. This will be repeated until FileHandler finds a file name that is not currently in use. If there is a conflict and no â€œ%uâ€ field has been specified, it will be added at the end of the filename after a dot. (This will be after any automatically added generation number.)<br>Thus if three processes were all trying to log to fred%u.%g.txt then they might end up using fred0.0.txt, fred1.0.txt, fred2.0.txt as the first file in their rotating sequences.<br>Note that the use of unique ids to avoid conflicts is only guaranteed to work reliably when using a local disk file system.</p>
</blockquote>
<h1 id="é…ç½®æ—¥å¿—åº“æœåŠ¡">é…ç½®æ—¥å¿—åº“æœåŠ¡</h1><p>æˆ‘ä»¬å¸Œæœ›æ—¥å¿—åº“èƒ½å¤Ÿæ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼ŒæŠŠlogæ‰“å°åˆ°æ§åˆ¶å°ã€æˆ–è€…è¾“å‡ºåˆ°SDå¡çš„æ–‡ä»¶ï¼Œæˆ–è€…åœ¨æŸäº›æ¡ä»¶ä¸‹æŠŠSDçš„æ—¥å¿—æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œé‚£ä¹ˆå°±éœ€è¦ä»¥serviceçš„å½¢å¼æ¥æä¾›æ—¥å¿—åº“çš„åŠŸèƒ½ã€‚</p>
<p>å¤§ä½“çš„æ¶æ„è®¾è®¡ï¼Œå°±æ˜¯æŠŠæ—¥å¿—åº“serviceè·‘åœ¨ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ä¸­ï¼Œæä¾›ä¸€ä¸ªwrapperç±»ä¾›ç”¨æˆ·è°ƒç”¨ï¼Œå¯¹äºæ—¥å¿—åº“servcieçš„ä»»ä½•è°ƒç”¨éƒ½å¯¹ç”¨æˆ·æ˜¯é€æ˜çš„ï¼Œç”¨æˆ·åªéœ€è¦åƒä½¿ç”¨androidè‡ªå¸¦çš„Logå·¥å…·é‚£æ ·ä½¿ç”¨.d()ã€.e()æ–¹æ³•å°±å¯ä»¥äº†ã€‚æ¯ä¸ªappåœ¨è‡ªå·±çš„Applicationç±»ä¸­è°ƒç”¨æ—¥å¿—åº“wrappeç±»çš„åˆå§‹åŒ–å‡½æ•°ï¼Œåœ¨è¿™ä¸€æ­¥ä¼ å…¥appè‡ªå·±çš„ç›¸å…³ä¿¡æ¯å¦‚åŒ…åç­‰ï¼Œæ—¥å¿—åº“ä¼šæ ¹æ®åŒ…åç”Ÿæˆå¯¹åº”çš„æ—¥å¿—æ–‡ä»¶ã€‚serviceä¸­å¼€ä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œé‡Œé¢æ˜¾ç¤ºåœ°å¯åŠ¨ä¸€ä¸ªlooperï¼Œå¤–ç•Œå‘æ¥çš„æ‰“å°logçš„è¯·æ±‚éƒ½è¢«ä»¥æ¶ˆæ¯çš„å½¢å¼ä¼ é€’ç»™è¿™ä¸ªæ–°çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—æ¥å¤„ç†ã€‚</p>
<p>Threadçš„runæ–¹æ³•å¤§è‡´å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Looper.prepare();</span><br><span class="line">        mHandler = <span class="keyword">new</span> Handler() &#123;</span><br><span class="line">            <span class="annotation">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">switch</span> (msg.what) &#123;</span><br><span class="line">                    <span class="keyword">case</span> Log.VERBOSE:</span><br><span class="line">                        printToFile(msg, <span class="string">"VERBOSE"</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">case</span> Log.DEBUG:</span><br><span class="line">                        printToFile(msg, <span class="string">"DEBUG"</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">case</span> Log.INFO:</span><br><span class="line">                        printToFile(msg, <span class="string">"INFO"</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">case</span> Log.WARN:</span><br><span class="line">                        printToFile(msg, <span class="string">"WARN"</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">case</span> Log.ERROR:</span><br><span class="line">                        printToFile(msg, <span class="string">"ERROR"</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">case</span> Log.ASSERT:</span><br><span class="line">                        printToFile(msg, <span class="string">"ASSERT"</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Looper.loop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸€å¼€å§‹servcieçš„å·¥ä½œçº¿ç¨‹æ˜¯åœ¨orhanobut/loggerä¹‹ä¸Šåšæ‰©å±•ï¼Œå¯¹äºwrapperç±»çš„å®ç°æ˜¯ä½¿ç”¨AIDLï¼Œåœ¨appè°ƒç”¨wrapperçš„åˆå§‹åŒ–å‡½æ•°æ—¶ï¼Œwrapperè‡ªåŠ¨bindåˆ°æ—¥å¿—åº“serviceï¼Œç„¶åå†é€šè¿‡AIDLè°ƒç”¨serviceçš„åˆå§‹åŒ–ä»¥åŠæ‰“å°logçš„æ–¹æ³•ï¼ˆè¿™äº›å¯¹ç”¨æˆ·appéƒ½æ˜¯é€æ˜çš„ï¼‰ã€‚è¿™é‡Œå°±é‡åˆ°ä¸€ä¸ªå¤§å‘ï¼š</p>
<p>å¦‚æœä»¥æ˜¾ç¤ºIntentçš„æ–¹æ³•æ¥å¯åŠ¨servcieï¼Œå°±ä¼šå‘ç°æŠŠæ—¥å¿—åº“ä»¥moduleæºç çš„å½¢å¼æä¾›ç»™appä½¿ç”¨æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯å¦‚æœæ‰“æˆaaråŒ…æä¾›ç»™appä½¿ç”¨ï¼Œå°±ä¼šå‡ºç°bindå¤±è´¥ï¼Œå¾ˆå¥‡æ€ªã€‚</p>
<p>å¦‚æœä»¥éšå¼Intentçš„æ–¹æ³•æ¥å¯åŠ¨serviceï¼Œæ‰“æˆaaråŒ…ä¹Ÿå¯ä»¥æ­£å¸¸å¯åŠ¨servieï¼Œä½†æ˜¯ç”±äºandroid 5.0ä»¥ä¸Šè¦æ±‚å¿…é¡»ä»¥æ˜¾ç¤ºIntentå¯åŠ¨serviceï¼Œæ•…è¿™ç§æ–¹æ³•çš„è¦†ç›–èŒƒå›´å¤ªå°ã€‚</p>
<p>åæ¥å¤§ç¥reviewäº†æˆ‘çš„ä»£ç ï¼Œè¯´æœ€å¥½ä¸è¦ç”¨AIDLï¼Œå› ä¸ºé‚£æ ·ä¼šä¸€ç›´åœ¨appå’Œservcieä¹‹é—´ä¿æŒä¸€ä¸ªé•¿è¿æ¥ï¼Œæ²¡æœ‰å¿…è¦ã€‚å¯ä»¥ç›´æ¥ç”¨startæ–¹æ³•å¯åŠ¨servcieï¼Œç”¨intentæ¥ä¼ é€’è¯·æ±‚å‚æ•°ï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚å†åŠ ä¸Šæˆ‘å†™çš„ç¬¬ä¸€ç‰ˆæ˜¯ä»¥log4jçš„å½¢å¼ï¼Œè™½ç„¶æä¾›äº†gradleçš„å‚æ•°é…ç½®æ—¥å¿—åº“çš„å„é¡¹åŠŸèƒ½ï¼Œä½†æ˜¯åŠŸèƒ½æ˜¯å†™æ­»çš„ï¼Œæ— æ³•æ‰©å±•ï¼Œå¦‚æœç”¨æˆ·æœ‰ä¸€äº›ä¸ªæ€§åŒ–çš„æ—¥å¿—éœ€æ±‚å°±æ²¡æ³•ç”¨æˆ‘è¿™ä¸ªä¸œè¥¿ã€‚</p>
<p>æ‰€ä»¥åæ¥å°±å¯¹ä»£ç è¿›è¡Œäº†é‡æ„ï¼Œæ”¹ä¸ºåœ¨JakeWharton/timberä¹‹ä¸Šæ‰©å±•ï¼Œæˆ‘æä¾›ä¸€ä¸ªæ—¥å¿—æ¡†æ¶ï¼Œä»¥åŠä¸¤ä¸ªæ—¥å¿—å·¥å…·ï¼ˆæ‰“å°åˆ°æ§åˆ¶å°ã€æ‰“å°åˆ°æ–‡ä»¶ï¼‰ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥ç»§æ‰¿æˆ‘çš„æ—¥å¿—å·¥å…·åŸºç±»å®ç°è‡ªå·±çš„æ—¥å¿—å·¥å…·ã€‚ç”¨æˆ·åœ¨è‡ªå·±çš„appä¸­ï¼Œæ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œåœ¨åˆå§‹åŒ–æ—¶é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªæ—¥å¿—å·¥å…·å®‰è£…åˆ°æ¡†æ¶ï¼Œå…·ä½“çš„æ‰“å°è¯·æ±‚ä¹Ÿæ˜¯åŒandroidé»˜è®¤æ—¥å¿—å·¥å…·ä¸€æ ·ç›´æ¥.d()ã€.e()è¿™æ ·è°ƒç”¨ï¼Œå¾ˆæ–¹ä¾¿ã€‚</p>
<p>è¿™é‡Œè®°ä¸€ä¸‹è¸©åˆ°çš„å¦å¤–å‡ ä¸ªå‘ï¼Œæœ‰äº›æ¯”è¾ƒä½çº§ğŸ˜“ï¼š<br>1ã€ä¸€å¼€å§‹ä¹‹æ‰€ä»¥é€‰æ‹©åœ¨orhanobut/loggerä¸Šæ‰©å±•ï¼Œæ˜¯å› ä¸ºå®ƒé»˜è®¤æä¾›äº†éå¸¸ç¾è§‚çš„æ‰“å°æ ¼å¼ï¼Œä»¥åŠçº¿ç¨‹ä¿¡æ¯ã€æ—¥å¿—è°ƒç”¨æ ˆä¿¡æ¯ã€‚åæ¥çªç„¶ååº”è¿‡æ¥ï¼Œæˆ‘æä¾›çš„åº“è™½ç„¶ä¼šä¸ç”¨æˆ·appæ‰“è¿›åŒä¸€ä¸ªapkï¼Œwrapperä¹Ÿæ˜¯ä¸ç”¨æˆ·appè·‘åœ¨åŒä¸€çº¿ç¨‹ï¼Œä½†æ˜¯çœŸæ­£çš„æ—¥å¿—æ‰“å°å·¥ä½œæ˜¯åœ¨serviceçš„å•ç‹¬è¿›ç¨‹ä¸­å®Œæˆçš„ï¼Œé‚£ä¹ˆå®ƒé»˜è®¤æä¾›çš„è°ƒç”¨æ ˆä¿¡æ¯å°±æ— æ„ä¹‰äº†ã€‚  </p>
<p>2ã€ADILæ˜¯åŒæ­¥è°ƒç”¨ï¼Œè€Œserviceçš„æ‰€æœ‰å…¶å®ƒæ¥å£ï¼ˆbind, unbind, startService, stopServiceï¼‰éƒ½æ˜¯å¼‚æ­¥æ¥å£ï¼Œç«‹å³è¿”å›ã€‚å‚è€ƒï¼š<a href="http://blog.csdn.net/edisonlg/article/details/7164761ï¼‰ã€‚" target="_blank" rel="external">http://blog.csdn.net/edisonlg/article/details/7164761ï¼‰ã€‚</a>  </p>
<p>3ã€åœ¨è°ƒè¯•æ—¶å‘ç°åˆå§‹åŒ–è²Œä¼¼å¾ˆè€—æ—¶ï¼Œè·Ÿè¸ªäº†ä¸€ä¸‹ï¼Œå‘ç°new FileHandler()è¿™ä¸€æ“ä½œå±…ç„¶è¦è€—æ—¶30~40ms!!!</p>
</div><div class="tags"><a href="/tags/Android/">Android</a><a href="/tags/åº“é¡¹ç›®/">åº“é¡¹ç›®</a><a href="/tags/æ—¥å¿—/">æ—¥å¿—</a></div><div class="post-nav"><a href="/2015/10/10/FlatBufferså­¦ä¹ æ€»ç»“.html" class="next">FlatBufferså­¦ä¹ æ€»ç»“<i class="icon-next"></i></a></div><div data-thread-key="2015/11/13/ä¸€ä¸ªandroidæ—¥å¿—åº“çš„å®ç°.html" data-title="ä¸€ä¸ªandroidæ—¥å¿—åº“çš„å®ç°" data-url="http://www.carrotsight.com/2015/11/13/ä¸€ä¸ªandroidæ—¥å¿—åº“çš„å®ç°.html" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">åˆ†äº«åˆ°ï¼š</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">å¾®åš</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQç©ºé—´</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">è…¾è®¯å¾®åš</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">å¾®ä¿¡</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2015/11/13/ä¸€ä¸ªandroidæ—¥å¿—åº“çš„å®ç°.html" data-title="ä¸€ä¸ªandroidæ—¥å¿—åº“çš„å®ç°" data-url="http://www.carrotsight.com/2015/11/13/ä¸€ä¸ªandroidæ—¥å¿—åº“çš„å®ç°.html" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><input placeholder="Search" type="text" class="st-default-search-input"/></div><div class="widget"><div class="widget-title">åˆ†ç±»</div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flex/">Flex</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li></ul></div><div class="widget"><div class="widget-title">æ ‡ç­¾</div><div class="tagcloud"><a href="/tags/EventBus/" style="font-size: 15px;">EventBus</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/å¹¶å‘/" style="font-size: 15px;">å¹¶å‘</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/å®‰å…¨/" style="font-size: 15px;">å®‰å…¨</a> <a href="/tags/reflection/" style="font-size: 15px;">reflection</a> <a href="/tags/åå°„/" style="font-size: 15px;">åå°„</a> <a href="/tags/å¤šçº¿ç¨‹/" style="font-size: 15px;">å¤šçº¿ç¨‹</a> <a href="/tags/Otto/" style="font-size: 15px;">Otto</a> <a href="/tags/è§‚å¯Ÿè€…æ¨¡å¼/" style="font-size: 15px;">è§‚å¯Ÿè€…æ¨¡å¼</a> <a href="/tags/æ—¥å¿—/" style="font-size: 15px;">æ—¥å¿—</a> <a href="/tags/åº“é¡¹ç›®/" style="font-size: 15px;">åº“é¡¹ç›®</a> <a href="/tags/facebook/" style="font-size: 15px;">facebook</a> <a href="/tags/FlatBuffers/" style="font-size: 15px;">FlatBuffers</a> <a href="/tags/Google/" style="font-size: 15px;">Google</a></div></div><div class="widget"><div class="widget-title">æœ€æ–°æ–‡ç« </div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2015/11/13/ä¸€ä¸ªandroidæ—¥å¿—åº“çš„å®ç°.html">ä¸€ä¸ªandroidæ—¥å¿—åº“çš„å®ç°</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/10/FlatBufferså­¦ä¹ æ€»ç»“.html">FlatBufferså­¦ä¹ æ€»ç»“</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/09/19/2015-9-19-Androidç¼–ç¨‹è¦æ³¨æ„çš„å®‰å…¨è§„èŒƒ.html">Androidç¼–ç¨‹è¦æ³¨æ„çš„å®‰å…¨è§„èŒƒ</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/09/16/2015-9-16-ã€ŠThink-in-Javaã€‹ç±»å‹ä¿¡æ¯-â€“-å­¦ä¹ ç¬”è®°.html">ã€ŠThink in Javaã€‹ç±»å‹ä¿¡æ¯ â€“ å­¦ä¹ ç¬”è®°</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/09/15/2015-9-15-Ottoå­¦ä¹ ç¬”è®°.html">Ottoå­¦ä¹ ç¬”è®°</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/09/14/2015-9-14-EventBuså­¦ä¹ æ€»ç»“.html">EventBuså­¦ä¹ æ€»ç»“</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/09/08/2015-9-8-ã€ŠThink-in-Javaã€‹å¹¶å‘-å­¦ä¹ ç¬”è®°.html">ã€ŠThink in Javaã€‹å¹¶å‘ - å­¦ä¹ ç¬”è®°</a></li><li class="post-list-item"><a class="post-list-link" href="/2013/12/02/2013-12-2-FLEXæ— æ³•å¯åŠ¨æœåŠ¡å› ä¸ºfmlæ–‡ä»¶æŸå.html">ã€FLEX bug:æ— æ³•å¯åŠ¨æœåŠ¡ï¼Œå› ä¸ºfmlæ–‡ä»¶æŸåã€‘çš„è§£å†³åŠæ³•</a></li><li class="post-list-item"><a class="post-list-link" href="/2013/04/03/2013-4-3-Flexä¸­datagridä¸­checkboxçš„å…¨é€‰å®ç°.html">Flexä¸­datagridä¸­checkboxçš„å…¨é€‰å®ç°</a></li></ul></div><div class="widget"><div class="comments-title">æœ€è¿‘è¯„è®º</div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title">å‹æƒ…é“¾æ¥</div></div></div></div></div><div id="footer">Â© <a href="/" rel="nofollow">ljfxyj2008çš„å°ç«™.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div><a id="rocket" href="#top" class="show"></a><script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/totop.js" type="text/javascript"></script><script src="/js/fancybox.pack.js" type="text/javascript"></script>
<script src="/js/jquery.fancybox.js" type="text/javascript"></script><link rel="stylesheet" href="/css/jquery.fancybox.css" type="text/css"><script>var duoshuoQuery = {short_name:'carrotsight'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><script>(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

_st('install','dMqdYr62RGqqfwhQNdbT','2.0.0');
</script><script>(function(){
var bp = document.createElement('script');
bp.src = '//push.zhanzhang.baidu.com/push.js';
var s = document.getElementsByTagName("script")[0];
s.parentNode.insertBefore(bp, s);
})();</script></div></body></html>